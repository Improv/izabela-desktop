<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Izabela</title>
    <link rel="stylesheet" type="text/css" href="assets/dist/css/main.css">
</head>

<body id="body">
    <section id="app" class="focused">
        <div id="window">
            <div class="controls pull-right">
                <button id="minimize" class="silent pull-left"><i class="in-button ion-android-remove"></i></button>
                <button id="settingsToggle" class="silent pull-left"><i class="in-button ion-gear-b"></i></button>
                <button id="close" class="silent pull-left"><i class="in-button ion-android-close"></i></button>
            </div>
        </div>
        <div id="content">
            <audio id="audio-stream"></audio>
            <div class="clarence">
                <h1>izabela</h1>
                <div class="pulse"></div>
                <div class="pulse-grey"></div>
            </div>
            <div id="writing">
                <div class="text">
                    <input class="main-input" type="text" value="hej, i'm here to help!">
                    <!-- <textarea class="main-input">hej, i'm here to help!</textarea> -->
                </div>
            </div>
        </div>
        <div id="settings">
            <div id="user_settings">
                <div class="setting">
                    <span>Keyboard Type:</span>
                    <select id="keyboard" name="">
                        <option value="qwerty">QWERTY</option>
                        <option value="azerty">AZERTY</option>
                    </select>
                </div>
                <div class="setting">
                    <span>Mode:</span>
                    <select id="mode" name="">
                        <option value="sentence" selected="selected">Sentence</option>
                        <option value="word">Word</option>
                    </select>
                </div>
                <div class="setting">
                    <span>Audio Output:</span>
                    <select id="output" name=""></select>
                </div>
                <div class="setting">
                    <span>Api:</span>
                    <select id="api" name="">
                        <option value="pollyRTC">Polly</option>
                        <option value="responsivevoiceRTC">Responsive Voice</option>
                    </select>
                </div>
            </div>
            <div id="api_settings">
                <div class="setting">
                    <span>Voice:</span>
                    <select id="voices" name=""></select>
                </div>
                <div class="setting">
                    <span>Rate:</span>
                    <input id="rate" type="number" min="0" max="2" value="1" step="0.1">
                    <!-- <input type="range" min="0" max="1" value="0.5" step="0.1"> -->
                </div>
                <div class="setting">
                    <span>Pitch:</span>
                    <input id="pitch" type="number" min="0" max="2" value="1.1" step="0.1">
                    <!-- <input type="range" min="0" max="1" value="0.6" step="0.1"> -->
                </div>
                <div class="setting">
                    <span>Volume:</span>
                    <input id="volume" type="number" min="0" max="1" value="1" step="0.1">
                    <!-- <input type="range" min="0" max="1" value="1" step="0.1"> -->
                </div>
            </div>
        </div>
    </section>
    <script>
        const {
            electron,
            ipcRenderer,
            remote
        } = require('electron')

        var json = remote.getGlobal('userSettings').json;
        document.getElementById('settings').setAttribute('data-json', json)
    </script>
    <script src="./assets/dist/js/main.bundle.js"></script>
    <script src="./assets/dist/js/vendors/responsivevoice.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.13.min.js"></script>
    <script>
        var json = remote.getGlobal('userSettings').json;
        ipcRenderer.on('shortcut', (event, letter) => {
            $(window).trigger('insertLetter', letter)
        })
        ipcRenderer.on('shortcut-space', (event, letter) => {
            $(window).trigger('spaceLetter', letter)
        })
        ipcRenderer.on('shortcut-delete', (event, letter) => {
            $(window).trigger('deleteLetter', letter)
        })
        ipcRenderer.on('shortcut-validate', (event, letter) => {
            $(window).trigger('validateMessage', letter)
        })
        ipcRenderer.on('clear-message', () => {
            $(window).trigger('clearMessage')
        })
        ipcRenderer.on('global-on', () => {
            $(window).trigger('globalOn')
        })
        ipcRenderer.on('global-off', () => {
            $(window).trigger('globalOff')
        })
        $(window).on('saveSettings', function(event, parameters) {
            console.log(parameters);
            ipcRenderer.send('saveSettings', parameters);
        });
        $(window).on('focus', function() {
            ipcRenderer.send('killEvents');
        });
        $(window).on('keydown', function(e) {
            if (e.which == 123) {
                e.preventDefault();
                remote.getCurrentWindow().toggleDevTools();
            }
        });
        // require('assets/dist/js/main.bundle.js')
        document.getElementById("minimize").addEventListener("click", function(e) {
            var window = remote.getCurrentWindow();
            window.minimize();
        });
        // document.getElementById("maximize").addEventListener("click", function (e) {
        //      var window = remote.getCurrentWindow();
        //      if (!window.isMaximized()) {
        //          window.maximize();
        //      } else {
        //          window.unmaximize();
        //      }
        // });
        document.getElementById("close").addEventListener("click", function(e) {
            var window = remote.getCurrentWindow();
            window.close();
            remote.app.quit();
        });
    </script>
</body>

</html>
